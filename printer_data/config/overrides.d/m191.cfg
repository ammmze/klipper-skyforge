# [gcode_macro M191]  #This command optionally sets a new target chamber temperature
# #and waits for the target temperature to be reached before proceeding.
# #If the temperature is set with S then it waits only when heating.
# gcode:
#   {% set target_chamber = params.CHAMBER_TEMP|default("24")|float %}           # Get target chamber temp from gcode
#   #{% set target_chamber = params.CHAMBER_TEMP | float %}
#   {% set current_temp = current_chamber_temp|default("20")|float %}            # Get current chamber temp from thermistor
#   #{% set current_temp = current_chamber_temp | float %}
#   {action_respond_info('Target chamber temp set to %.1fC.' % (target_chamber))}
  
#   {% if target_chamber < current_temp %}                                        # Judging the actual chamber temperature
#       {action_respond_info('Chamber temp low %.1fC. Start heating' % (target_chamber))}
#       M117 Chamber Heating...
#       TEMPERATURE_WAIT SENSOR=heater_generic chamber_heater MINIMUM={target_chamber}
#       #SET_TEMPERATURE_FAN_TARGET temperature_fan=Chamber_venting_fan target=65
#       SET_TEMPERATURE_FAN_TARGET temperature_fan=Chamber_venting_fan target={(target_chamber-10)}
     
#     {% elif target_chamber >= current_temp %}                                       # Judging the actual chamber temperature
#       {action_respond_info('Chamber temp high %.1fC. Start venting' % (target_chamber))} 
#       M117 Chamber Venting...
#       #SET_TEMPERATURE_FAN_TARGET temperature_fan="Chamber_venting_fan" MIMIMUM=target={target_chamber}
#       SET_TEMPERATURE_FAN_TARGET temperature_fan="Chamber_venting_fan" target={target_chamber}
#     #{% endif %}
#   {% endif %}
